# –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ Combat Service - –í—Å–µ –∞—Å–ø–µ–∫—Ç—ã –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

Combat Service –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–ª–æ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è PvE –±–æ—è–º–∏ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–ª–æ—è–º–∏ –ª–æ–≥–∏–∫–∏ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å CharacterStatsService.

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ò –ü–û–î–í–û–î–ù–´–ï –ö–ê–ú–ù–ò

### 1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º—É–ª —Ä–∞—Å—á–µ—Ç–∞ HP/Energy

**–ü—Ä–æ–±–ª–µ–º–∞**: Combat Service –¥—É–±–ª–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è –∏ —ç–Ω–µ—Ä–≥–∏–∏ –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:

#### –ú–µ—Å—Ç–æ 1: `startCombat()` (—Å—Ç—Ä–æ–∫–∏ 75-83)
```javascript
// –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∑–¥–æ—Ä–æ–≤—å–µ –ø–æ —Ñ–æ—Ä–º—É–ª–µ: 100 + (level * 2) + (health * 2)
const playerLevel = fullPlayerStats.base.level || 1;
const healthStat = fullPlayerStats.modified.health || 10;
const calculatedMaxHp = 100 + (playerLevel * 2) + (healthStat * 2);

// –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —ç–Ω–µ—Ä–≥–∏—é –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
const energyStat = fullPlayerStats.modified.energy || 50;
const calculatedMaxEnergy = 50 + (playerLevel * 1) + (energyStat * 1);
```

#### –ú–µ—Å—Ç–æ 2: `_recalculateCombatStats()` (—Å—Ç—Ä–æ–∫–∏ 488-495)
```javascript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç—É –∂–µ —Ñ–æ—Ä–º—É–ª—É, —á—Ç–æ –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–æ—è: 100 + (level * 2) + (health * 2)
const newMaxHp = 100 + (playerLevel * 2) + (healthStat * 2);
const newMaxEnergy = 50 + (playerLevel * 1) + (energyStat * 1);
```

**–†–∏—Å–∫**: –ï—Å–ª–∏ —Ñ–æ—Ä–º—É–ª—ã –∏–∑–º–µ–Ω—è—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, –Ω–æ –Ω–µ –≤ –¥—Ä—É–≥–æ–º, –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è.

### 2. –ù–µ–ø–æ–ª–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CharacterStatsService

**–ü—Ä–æ–±–ª–µ–º–∞**: Combat Service —á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CharacterStatsService, –Ω–æ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é:

#### ‚úÖ –ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- `CharacterStatsService.getCombinedCharacterState(userId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `CharacterStatsService.applyEffectsToStats()` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- `CharacterStatsService.calculateSecondaryStats()` - —Ä–∞—Å—á–µ—Ç –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫

#### ‚ùå –ß—Ç–æ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è:
- –§–æ—Ä–º—É–ª—ã HP/Energy –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ CharacterStatsService
- –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

### 3. –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –í `applyPeriodicEffects()` (—Å—Ç—Ä–æ–∫–∏ 758-786) –µ—Å—Ç—å —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é:

```javascript
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —ç—Ñ—Ñ–µ–∫—Ç–∞
if (effect.name) {
  const name = effect.name.toLowerCase();
  if (name.includes('–Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ') && name.includes('—ç–Ω–µ—Ä–≥–∏')) {
    effectType = 'energy_gain';
  } else if (name.includes('–±–∞–≥—Ä—è–Ω–æ–µ') && name.includes('–ø–ª–∞–º—è')) {
    effectType = 'burn';
  }
  // ... –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö —É—Å–ª–æ–≤–∏–π
}
```

**–†–∏—Å–∫–∏**:
- –•—Ä—É–ø–∫–æ—Å—Ç—å: –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Å–ª–æ–º–∞–µ—Ç –ª–æ–≥–∏–∫—É
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –µ—Å—Ç—å –≤ PvP Service
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö

### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞—Å—á–µ—Ç–æ–º —É—Ä–æ–Ω–∞

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã –≤ `_calculateDamage()` (—Å—Ç—Ä–æ–∫–∏ 519-627)**:

#### 4.1 –°–º–µ—à–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –∏ –≤—Ä–∞–≥–æ–≤
```javascript
// –î–ª—è –∏–≥—Ä–æ–∫–∞: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É —É–¥–∞—á–∏
if (defenderState.secondaryStats && defenderState.secondaryStats.luck) {
  dodgeChance += Math.floor(defenderState.secondaryStats.luck / 2);
}
// –î–ª—è –≤—Ä–∞–≥–∞: –∏—Å–ø–æ–ª—å–∑—É–µ–º evasion –∏–∑ –±–∞–∑–æ–≤—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
else if (defenderState.baseStats && defenderState.baseStats.evasion) {
  dodgeChance += Math.floor(defenderState.baseStats.evasion / 10);
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –†–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –∏ –≤—Ä–∞–≥–æ–≤ —É—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

#### 4.2 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è physicalAttack
```javascript
// –î–ª—è –æ–±—ã—á–Ω—ã—Ö –∞—Ç–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç
damagePercent = 10 + attackerLevel;
damage = Math.floor((defenderMaxHp * damagePercent) / 100);
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `physicalAttack` –∏–∑ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ–π –≤ PvE –±–æ—è—Ö.

#### 4.3 –ü—Ä–∏–º–∏—Ç–∏–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞
–ó–∞—â–∏—Ç–∞ –≤–æ–æ–±—â–µ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ —Ä–∞—Å—á–µ—Ç–µ —É—Ä–æ–Ω–∞, —Ç–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç—ã.

### 5. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –±–æ—è

#### 5.1 –°–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ playerState
```javascript
const playerState = {
  currentHp: calculatedMaxHp,
  maxHp: calculatedMaxHp,
  currentEnergy: calculatedMaxEnergy,
  maxEnergy: calculatedMaxEnergy,
  baseStats: fullPlayerStats.base,        // –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∞—Ç—ã
  secondaryStats: fullPlayerStats.secondary, // –í—Ç–æ—Ä–∏—á–Ω—ã–µ —Å—Ç–∞—Ç—ã
  effects: [],
  techniques: learnedTechniques || []
};
```

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `modifiedStats` (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `_recalculateCombatStats`)
- –ù–µ—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è —Å PvP Service
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–∞–∫–∏–µ —Å—Ç–∞—Ç—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã

#### 5.2 –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
```javascript
// Sequelize –Ω–µ –≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ JSONB
combat.changed('player_state', true);
combat.changed('enemy_state', true);
combat.changed('log', true);
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≥–æ–≤–æ—Ä–∏—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –¥–∞–Ω–Ω—ã—Ö.

### 6. –õ–æ–≥–∏–∫–∞ —Ç–µ—Ö–Ω–∏–∫ –∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

#### 6.1 –°–ª–æ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Ö–Ω–∏–∫ –≤ `performAction()` (—Å—Ç—Ä–æ–∫–∏ 216-277)
```javascript
// –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
if (technique.effects && technique.effects.length > 0) {
  this._applyTechniqueEffects(technique, targetState);
  message += ` –ù–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ ${targetName}.`;
  
  // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–≥—Ä–æ–∫–∞, –Ω–µ –¥–ª—è –≤—Ä–∞–≥–æ–≤
  if (targetState === combat.player_state) {
    this._recalculateCombatStats(targetState);
  }
}
```

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –†–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –∏ –≤—Ä–∞–≥–æ–≤
- –°–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ü–µ–ª–µ–π
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ—Å—á–µ—Ç—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫

#### 6.2 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ `_applyTechniqueEffects()` (—Å—Ç—Ä–æ–∫–∏ 324-449)
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥—É–±–ª–∏—Ä—É–µ—Ç –º–Ω–æ–≥–æ –ª–æ–≥–∏–∫–∏ –∏–∑ PvP Service –∏ CharacterStatsService.

### 7. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏

#### 7.1 –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ `applyPeriodicEffects()` (—Å—Ç—Ä–æ–∫–∏ 743-948)
- 200+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ switch-case –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤

#### 7.2 –ü—Ä–æ–±–ª–µ–º—ã —Å –≤—Ä–µ–º–µ–Ω–µ–º —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
```javascript
static updateEffectsDuration(entityState) {
  const now = Date.now();
  entityState.effects = entityState.effects.filter(effect => {
    if (effect.permanent || !effect.durationMs) return true;
    const startTime = effect.startTime || new Date(effect.appliedAt).getTime();
    const elapsedMs = now - startTime;
    const isExpired = elapsedMs >= effect.durationMs;
    return !isExpired;
  });
}
```

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –°–º–µ—à–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ (startTime vs appliedAt)
- –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å PvP Service
- –°–ª–æ–∂–Ω–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –≤—Ä–µ–º–µ–Ω–µ–º

### 8. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 8.1 –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
Combat Service –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –±–æ—è
- –†–∞—Å—á–µ—Ç —É—Ä–æ–Ω–∞
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫—É —Ç–µ—Ö–Ω–∏–∫
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –†–∞—Å—á–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- –û–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞–≥—Ä–∞–¥

#### 8.2 –¢–µ—Å–Ω–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å
Combat Service –Ω–∞–ø—Ä—è–º—É—é –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:
- CharacterStatsService (—á–∞—Å—Ç–∏—á–Ω–æ)
- TechniqueService
- QuestService
- InventoryService
- –ú–Ω–æ–∂–µ—Å—Ç–≤–∞ –º–æ–¥–µ–ª–µ–π

#### 8.3 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π
–ù–µ—Ç –æ–±—â–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–ª—è:
- –û–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –†–∞—Å—á–µ—Ç–∞ —É—Ä–æ–Ω–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å—É—â–Ω–æ—Å—Ç–µ–π

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –î–õ–Ø –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º—É–ª HP/Energy** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
2. **–ù–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ physicalAttack** - –¥–µ–ª–∞–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ–π
3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤** - —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
4. **–°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤** - —Ö—Ä—É–ø–∫–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
5. **–†–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –∏ –≤—Ä–∞–≥–æ–≤** - —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏—è
6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—á–µ—Ç–∞ –∑–∞—â–∏—Ç—ã** - –Ω–µ–ø–æ–ª–Ω–∞—è –±–æ–µ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
7. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã** - –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
8. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –±–æ—è** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üîß –°–¢–†–ê–¢–ï–ì–ò–Ø –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

### –≠—Ç–∞–ø 1: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º—É–ª (–ö—Ä–∏—Ç–∏—á–Ω–æ)
1. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ñ–æ—Ä–º—É–ª—ã HP/Energy –≤ CharacterStatsService
2. –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –±–æ–µ–≤—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
3. –û–±–Ω–æ–≤–∏—Ç—å Combat Service –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è physicalAttack (–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
1. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `_calculateDamage()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è physicalAttack
2. –î–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç physicalDefense –∏ spiritualDefense
3. –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ä–∞—Å—á–µ—Ç–∞ —É—Ä–æ–Ω–∞

### –≠—Ç–∞–ø 3: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
1. –°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
2. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ CharacterStatsService
3. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å PvP Service

### –≠—Ç–∞–ø 4: –£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
1. –†–∞–∑–¥–µ–ª–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
2. –°–æ–∑–¥–∞—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–ª—è –æ–±—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

## üß™ –ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
1. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º—É–ª** - HP/Energy –¥–æ–ª–∂–Ω—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ
2. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏** - –¥–æ–ª–∂–Ω—ã –≤–ª–∏—è—Ç—å –Ω–∞ —É—Ä–æ–Ω
3. **–†–∞—Å—á–µ—Ç —É—Ä–æ–Ω–∞ —Å physicalAttack** - –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ç–æ—Ä–∏—á–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
1. **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±–æ–∏** - –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–ª–æ–º–∞—Ç—å—Å—è
2. **–¢–µ—Ö–Ω–∏–∫–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã** - –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ
3. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã** - –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìã –ß–ï–ö–õ–ò–°–¢ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

- [ ] –°–æ–∑–¥–∞—Ç—å —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—á–µ—Ç–∞ HP/Energy –≤ CharacterStatsService
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å physicalAttack –≤ —Ä–∞—Å—á–µ—Ç —É—Ä–æ–Ω–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç –∑–∞—â–∏—Ç—ã –≤ —Ä–∞—Å—á–µ—Ç —É—Ä–æ–Ω–∞
- [ ] –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Å PvP Service
- [ ] –°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –±–æ–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- [ ] –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–æ—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üöÄ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ä–º—É–ª
- –†–∞–±–æ—Ç–∞—é—â–∏–π physicalAttack –≤ PvE –±–æ—è—Ö
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ PvE –∏ PvP —Å–∏—Å—Ç–µ–º
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –±–æ–µ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞

## ‚ö†Ô∏è –†–ò–°–ö–ò –ò –ú–ò–¢–ò–ì–ê–¶–ò–Ø

### –í—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏
1. **–ü–æ–ª–æ–º–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±–æ–µ–≤** - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: –ø–æ—ç—Ç–∞–ø–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å —Ç–µ—Å—Ç–∞–º–∏
2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∏–≥—Ä—ã** - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: —Ç—â–∞—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
3. **–†–µ–≥—Ä–µ—Å—Å–∏–∏ –≤ PvP** - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: –∏–∑–æ–ª—è—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –°—Ä–µ–¥–Ω–∏–µ —Ä–∏—Å–∫–∏
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
2. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

–≠—Ç–æ—Ç –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ Combat Service —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫, –Ω–æ —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏ –∏–≥—Ä—ã.