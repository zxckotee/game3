# üì¶ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ Docker

## üêå –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

–ö–æ–º–∞–Ω–¥–∞ `npm ci --only=production=false --silent` –∑–∞–≤–∏—Å–∞–µ—Ç –Ω–∞ Step 5/15.

## ‚è±Ô∏è –°–∫–æ–ª—å–∫–æ –∂–¥–∞—Ç—å?

### –í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
- **–û–±—ã—á–Ω–æ**: 3-10 –º–∏–Ω—É—Ç
- **–° –º–µ–¥–ª–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º**: 10-20 –º–∏–Ω—É—Ç
- **–§–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è–Ω–∏—è**:
  - –°–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (~30-50 –ø–∞–∫–µ—Ç–æ–≤)
  - –ö–æ–º–ø–∏–ª—è—Ü–∏—è –Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π (sqlite3, bcrypt –∏ –¥—Ä.)

### –ù–∞ –º–∞—à–∏–Ω–µ —Å 4 CPU:
- **npm ci**: 5-15 –º–∏–Ω—É—Ç (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)
- **–ö–æ–º–ø–∏–ª—è—Ü–∏—è**: –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å npm cache
```dockerfile
# –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ npm ci:
RUN npm config set cache /tmp/.npm
```

### 2. –û—Ç–∫–ª—é—á–∏—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```dockerfile
# –í–º–µ—Å—Ç–æ:
RUN npm ci --only=production=false --silent

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
RUN npm ci --only=production=false --silent --no-optional
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π registry
```dockerfile
RUN npm config set registry https://registry.npmjs.org/
RUN npm ci --only=production=false --silent
```

### 4. –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
```dockerfile
# –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–π —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
COPY package*.json ./
RUN npm ci --only=production=false --silent

# –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –æ—Ç–¥–µ–ª—å–Ω–æ
COPY . .
```

## üîß –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Dockerfile

```dockerfile
# –ù–æ–≤—ã–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Dockerfile –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
FROM node:18-bullseye-slim

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
WORKDIR /app

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN apt-get update && apt-get install -y \
    git \
    curl \
    python3 \
    build-essential \
    && rm -rf /var/lib/apt/lists/* \
    && apt-get clean

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º npm –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
RUN npm config set registry https://registry.npmjs.org/ && \
    npm config set cache /tmp/.npm

# –ö–æ–ø–∏—Ä—É–µ–º package.json –∏ package-lock.json –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY package*.json ./

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
RUN npm ci --only=production=false --silent --no-optional

# –ö–æ–ø–∏—Ä—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
COPY . .

# –≠–∫—Å–ø–æ–Ω–∏—Ä—É–µ–º –ø–æ—Ä—Ç—ã
EXPOSE 80 3001

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
ENV NODE_ENV=development
ENV CHOKIDAR_USEPOLLING=true
ENV WATCHPACK_POLLING=true
ENV GENERATE_SOURCEMAP=false
ENV SKIP_PREFLIGHT_CHECK=true
ENV FAST_REFRESH=true
ENV CI=false

# –ó–∞–ø—É—Å–∫–∞–µ–º npm run dev (concurrently –∑–∞–ø—É—Å–∫–∞–µ—Ç React –∏ Express)
CMD ["npm", "run", "dev"]
```

## ‚ö° –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –°–ï–ô–ß–ê–°

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–¥–æ–∂–¥–∞—Ç—å (5-15 –º–∏–Ω—É—Ç)
- npm ci —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ—Å—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–π —Å–±–æ—Ä–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–µ—Ä–≤–∞—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
```bash
# –ü—Ä–µ—Ä–≤–∞—Ç—å —Å–±–æ—Ä–∫—É
Ctrl+C

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Dockerfile
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
docker-compose build --no-cache
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑
```dockerfile
# –í –Ω–∞—á–∞–ª–µ Dockerfile –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑ —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
FROM node:18-bullseye-slim

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Alpine (–º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä)
FROM node:18-alpine
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
```bash
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
docker ps
docker logs <container_id>

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats
```

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã:
- CPU usage: 50-100%
- Memory usage: —Ä–∞—Å—Ç–µ—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
- Network I/O: –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º:
- CPU usage: 0%
- Memory usage: –Ω–µ —Ä–∞—Å—Ç–µ—Ç
- Network I/O: –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–î–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞**: –ü–æ–¥–æ–∂–¥–∞—Ç—å 10-15 –º–∏–Ω—É—Ç
**–î–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Dockerfile

–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: **5-15 –º–∏–Ω—É—Ç** (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)