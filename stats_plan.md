## Дополнение механики PvP

Теперь давай внедрим новую механику.
**1** - на противника должны накладываться эффекты только от тех техник, что имеют в бд type = attack, а остальные на меня. 

**2** - урон от обычной атаки или техники должны изначально высчитываться опираясь на состояние (state.player.secondaryStats). Мы должны брать вторичные характеристики и передавать их ещё при входе в комнату, у удалять запись при выходе. Столбцы должны иметь id, user_id, room_id, physical_attack, physical_defense , spiritual_attack (Физическая атака и защита, относится к обычной атаке или техникам типа attack) , spiritual_defense (Магические атака и защита, относится к техникам любого типа кроме attack). Если значение null, преобразуем в 0

Для этого создадим ещё одну таблицу (sql-скрипт в каталоге sql/) механики pvp .
# В общем:
    - 1 Урон обычной атаки мы получаем от physical_attack - physical_defense
    - 2 Урон от техники равен spiritual_attack(если damage_type = spirital, а если он равен attack, то используем характеристику  от physical) + physical_attack - spiritual_defense(если damage_type = spirital, а если он равен attack, то используем характеристику  от physical), если type техники attack, а если нет, то сразу приравниваем 0 . Кстати, если техника другого типа (не attack), то нам не нужно выбирать противника ()

Видь разницу между type и damage_type
# Применение кнопки "Защита" должна добавить эффект защиты, который также учитывается поверх предыдущих вычислений из характеристик, снижая весь урон на 40% на получаемые атаки техниками или обычными атаками на 2 действия (pvp_actions), где я причастен. Самое главное - урон не должен уходить в минус

# Также принимаем в расчет эффекты
Посмотри sql/41_pvp_effects.sql и сам разработай план для учета различных эффектов

# Это должно расширить серверный (сервисный) функционал и немного изменить обработку некоторых случаев на клиенте 


