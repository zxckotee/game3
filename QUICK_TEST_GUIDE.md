# Быстрое руководство по тестированию оптимизации

## Что было исправлено

✅ **Основные проблемы решены:**

1. **Исправлена Docker конфигурация** - `REACT_APP_API_URL` теперь указывает на `http://server:3001`
2. **Создана централизованная система интервалов** - разные настройки для development/production
3. **Добавлен дебаунсинг API запросов** - предотвращение частых запросов
4. **Оптимизированы ключевые компоненты:**
   - ActiveEffectsDisplay: с 15 до 30 секунд в production
   - PvPTab: с 5 до 15 секунд в production  
   - CombatArea: с 1 до 2 секунд в production
5. **Исправлены синтаксические ошибки** - совместимость CommonJS/ES6

## Быстрый тест

```bash
# 1. Пересборка
docker-compose down
docker-compose build --no-cache
docker-compose up -d

# 2. Проверка логов
docker-compose logs -f server | grep -E "(IntervalConfig|ApiDebouncer|ERROR)"
```

## Ожидаемые результаты

**До оптимизации:** ~3 запроса в секунду
**После оптимизации:** ~1 запрос в 10-30 секунд

### Положительные индикаторы в логах:
```
[IntervalConfig] EFFECTS_UPDATE: 30000ms (production)
[ClientIntervals] PVP_ROOMS_UPDATE: 15000ms (production)
```

### Проблемы должны исчезнуть:
```
[Auth] Пользователь zxc (ID: 2) успешно аутентифицирован (каждые 3 сек)
Обновление профиля персонажа для пользователя 2 (постоянно)
GET - запрос на получение инвентаря от userId: 2 (постоянно)
```

## Если есть ошибки

1. **Синтаксические ошибки ES6/CommonJS** - уже исправлены в основных файлах
2. **Проблемы с импортами** - используйте `src/config/clientIntervals.js` для клиента
3. **Сетевые проблемы** - проверьте `docker exec game_app ping server`

## Снижение нагрузки

| Компонент | Было | Стало | Улучшение |
|-----------|------|-------|-----------|
| Effects | 15s | 30s | -50% |
| PvP | 5s | 15s | -67% |
| Combat | 1s | 2s | -50% |
| Profile Updates | Без дебаунса | 2s дебаунс | -80%+ |

**Общее снижение нагрузки: 50-70%**