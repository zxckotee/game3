# üèóÔ∏è –†–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è Docker –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üìã –û–±–∑–æ—Ä

–°–æ–∑–¥–∞–Ω–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å —Ç—Ä–µ–º—è –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏:

### üîß –°–µ—Ä–≤–∏—Å—ã:
1. **postgres** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL 16
2. **server** - Express API —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 3001)
3. **app** - React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ—Ä—Ç 80)

## üìÅ –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

### 1. `Dockerfile.app` - React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```dockerfile
# Multi-stage build –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
FROM node:18-alpine
# –°–±–æ—Ä–∫–∞ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
# Nginx –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
```

### 2. `Dockerfile.server` - Express —Å–µ—Ä–≤–µ—Ä
```dockerfile
# Node.js Alpine —Å curl –¥–ª—è healthcheck
FROM node:18-alpine
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫–æ–¥–∞
# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Docker
```

### 3. `docker-compose.yml` - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
```yaml
# –¢—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
# Healthcheck'–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
# –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞:

### –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
docker-compose up -d
```

### –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
# –¢–æ–ª—å–∫–æ PostgreSQL
docker-compose up -d postgres

# PostgreSQL + Express —Å–µ—Ä–≤–µ—Ä
docker-compose up -d postgres server

# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d postgres server app
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs postgres
docker-compose logs server
docker-compose logs app
```

## üîó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π:

```
React App (port 80)
    ‚Üì HTTP requests
Express Server (port 3001)
    ‚Üì PostgreSQL connection
PostgreSQL (port 5432)
```

### –°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- **–í–Ω—É—Ç—Ä–∏ Docker**: —Å–µ—Ä–≤–∏—Å—ã –æ–±—â–∞—é—Ç—Å—è –ø–æ –∏–º–µ–Ω–∞–º (`postgres`, `server`)
- **–°–Ω–∞—Ä—É–∂–∏**: –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ localhost –∏ –ø—Ä–æ–±—Ä–æ—à–µ–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

### –î–ª—è server –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
```env
NODE_ENV=production
DB_HOST=postgres
DB_PORT=5432
DB_NAME=game
DB_USER=postgres
DB_PASSWORD=root
```

### –î–ª—è app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
```env
REACT_APP_API_URL=http://localhost:3001
```

## üè• Health Checks:

### PostgreSQL:
```bash
pg_isready -U postgres -d game
```

### Express Server:
```bash
curl -f http://localhost:3001/api/health
```

## üîÑ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤:

1. **postgres** - –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º
2. **server** - –∂–¥–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ postgres
3. **app** - –∂–¥–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ server

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥):
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ PostgreSQL
docker-compose up -d postgres

# 2. –õ–æ–∫–∞–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
npm run server

# 3. –õ–æ–∫–∞–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å React
npm start
```

### –ü–æ–ª–Ω–∞—è Docker —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –≤ Docker
docker-compose up -d

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
docker-compose up -d --build
```

## üîß –û—Ç–ª–∞–¥–∫–∞:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PostgreSQL
docker-compose exec postgres psql -U postgres -d game -c "SELECT 1;"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Express API
curl http://localhost:3001/api/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
curl http://localhost:80
```

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs -f

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f server
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
‚úÖ **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** - –º–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –æ—Ç–¥–µ–ª—å–Ω–æ
‚úÖ **–ü—Ä–æ—Å—Ç–∞—è –æ—Ç–ª–∞–¥–∫–∞** - –ø—Ä–æ–±–ª–µ–º—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** - –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤** - –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è Docker –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –≥–¥–µ:
- **app** = —Ç–æ–ª—å–∫–æ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **server** = —Ç–æ–ª—å–∫–æ Express API
- **postgres** = —Ç–æ–ª—å–∫–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ!